import { FormGroup, FormArray, FormControl } from "@angular/forms";
import { Observable } from "rxjs";
;
function makeFormGroup(source, keysValidator, asyncKeysValidator, internal = false) {
    const keys = source instanceof FormControl || source instanceof FormGroup || source instanceof FormArray ?
        Object.keys(source.value) :
        Object.keys(source);
    return keys.reduce((accumulator, key) => {
        if (!(source[key] instanceof Observable)) {
            accumulator.addControl(key, !!source[key] && typeof source[key] == 'object' && !(source[key] instanceof Date) ?
                source[key] instanceof FormControl || source[key] instanceof FormGroup || source[key] instanceof FormArray ?
                    source[key] :
                    makeForm(source[key], keysValidator, asyncKeysValidator, true) :
                new FormControl({
                    disabled: keysValidator?.has(key) && 'disabled' in keysValidator.get(key) ? keysValidator.get(key).disabled : false,
                    value: !!source[key] && typeof source[key] == 'string' && (source[key].includes('0001-01-01') || source[key].includes('1970-01-01')) ? null : source[key]
                }, keysValidator?.has(key) ? keysValidator.get(key) : null, asyncKeysValidator?.has(key) ? asyncKeysValidator.get(key) : null));
        }
        ;
        return accumulator;
    }, new FormGroup({}, keysValidator?.has('mainFormValidators') && !internal ?
        keysValidator.get('mainFormValidators') :
        null, asyncKeysValidator?.has('mainFormValidators') && !internal ?
        asyncKeysValidator.get('mainFormValidators') :
        null));
}
export function makeForm(source, keysValidator, asyncKeysValidator, internal = false) {
    const form = !!source && (typeof source === 'object' || typeof source === 'function') ?
        source instanceof Array ?
            new FormArray(source.map(item => makeForm(item, keysValidator, asyncKeysValidator, true)), keysValidator?.has('mainFormValidators') && !internal ?
                keysValidator.get('mainFormValidators') :
                null, asyncKeysValidator?.has('mainFormValidators') && !internal ?
                asyncKeysValidator.get('mainFormValidators') :
                null) :
            makeFormGroup(source, keysValidator, asyncKeysValidator, internal) :
        new FormControl({
            disabled: keysValidator?.has('mainFormValidators') && 'disabled' in (keysValidator.get('mainFormValidators')) ?
                keysValidator.get('mainFormValidators').disabled :
                false,
            value: source
        }, keysValidator?.has('mainFormValidators') && !internal ?
            keysValidator.get('mainFormValidators') :
            null, asyncKeysValidator?.has('mainFormValidators') && !internal ?
            asyncKeysValidator.get('mainFormValidators') :
            null);
    return form;
}
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWV4dGVuZGVkLWZvcm0tYnVpbGRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL25neC1leHRlbmRlZC1mb3JtLWJ1aWxkZXIvc3JjL2xpYi9uZ3gtZXh0ZW5kZWQtZm9ybS1idWlsZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRW5FLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFJakMsQ0FBQztBQUVGLFNBQVMsYUFBYSxDQUNwQixNQUFXLEVBQ1gsYUFBMEUsRUFDMUUsa0JBQTJELEVBQzNELFdBQW9CLEtBQUs7SUFFekIsTUFBTSxJQUFJLEdBQUcsTUFBTSxZQUFZLFdBQVcsSUFBSSxNQUFNLFlBQVksU0FBUyxJQUFJLE1BQU0sWUFBWSxTQUFTLENBQUMsQ0FBQztRQUN4RyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzNCLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDdEIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUNoQixDQUFDLFdBQXNCLEVBQUUsR0FBaUIsRUFBRSxFQUFFO1FBQzVDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsWUFBWSxVQUFVLENBQUMsRUFBRTtZQUN4QyxXQUFXLENBQUMsVUFBVSxDQUNwQixHQUFHLEVBQ0gsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxPQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxRQUFRLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsWUFBWSxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUNqRixNQUFNLENBQUMsR0FBRyxDQUFDLFlBQVksV0FBVyxJQUFJLE1BQU0sQ0FBQyxHQUFHLENB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QU0sRUFBRSxhQUFhLEVBQUUsa0JBQWtCLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUN0RSxJQUFJLFdBQVcsQ0FBQztZQUNkLFFBQVEsRUFBRSxhQUFhLEVBQUUsR0FBRyxDQUFDLG9CQUFvQixDQUFDLElBQUksVUFBVSxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBRSxDQUFDLENBQUMsQ0FBQztnQkFDckYsYUFBYSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUM1RSxLQUFLO1lBQ1AsS0FBSyxFQUFFLE1BQU07U0FDZCxFQUNDLGFBQWEsRUFBRSxHQUFHLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3JELGFBQWEsQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDO1lBQ3pDLElBQUksRUFDTixrQkFBa0IsRUFBRSxHQUFHLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzFELGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7WUFDOUMsSUFBSSxDQUFDLENBQUM7SUFDWixPQUFVLElBQUksQ0FBQztBQUNqQixDQUFDO0FBQUEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZvcm1Hcm91cCwgRm9ybUFycmF5LCBGb3JtQ29udHJvbCB9IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xuaW1wb3J0IHR5cGUgeyBWYWxpZGF0b3JGbiwgQXN5bmNWYWxpZGF0b3JGbiwgQWJzdHJhY3RDb250cm9sT3B0aW9ucyB9IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCJyeGpzXCI7XG5cbmludGVyZmFjZSBFeHRlbmRlZENvbnRyb2xPcHRpb25zIGV4dGVuZHMgQWJzdHJhY3RDb250cm9sT3B0aW9ucyB7XG4gIGRpc2FibGVkPzogYm9vbGVhbixcbn07XG5cbmZ1bmN0aW9uIG1ha2VGb3JtR3JvdXAoXG4gIHNvdXJjZTogYW55LFxuICBrZXlzVmFsaWRhdG9yPzogTWFwPHN0cmluZywgVmFsaWRhdG9yRm5bXSB8IEV4dGVuZGVkQ29udHJvbE9wdGlvbnMgfCBudWxsPixcbiAgYXN5bmNLZXlzVmFsaWRhdG9yPzogTWFwPHN0cmluZywgQXN5bmNWYWxpZGF0b3JGbltdIHwgbnVsbD4sXG4gIGludGVybmFsOiBib29sZWFuID0gZmFsc2Vcbik6IEZvcm1Hcm91cCB7XG4gIGNvbnN0IGtleXMgPSBzb3VyY2UgaW5zdGFuY2VvZiBGb3JtQ29udHJvbCB8fCBzb3VyY2UgaW5zdGFuY2VvZiBGb3JtR3JvdXAgfHwgc291cmNlIGluc3RhbmNlb2YgRm9ybUFycmF5ID9cbiAgICBPYmplY3Qua2V5cyhzb3VyY2UudmFsdWUpIDpcbiAgICBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoXG4gICAgKGFjY3VtdWxhdG9yOiBGb3JtR3JvdXAsIGtleTogc3RyaW5nIHwgYW55KSA9PiB7XG4gICAgICBpZiAoIShzb3VyY2Vba2V5XSBpbnN0YW5jZW9mIE9ic2VydmFibGUpKSB7XG4gICAgICAgIGFjY3VtdWxhdG9yLmFkZENvbnRyb2woXG4gICAgICAgICAga2V5LFxuICAgICAgICAgICEhc291cmNlW2tleV0gJiYgdHlwZW9mIHNvdXJjZVtrZXldID09ICdvYmplY3QnICYmICEoc291cmNlW2tleV0gaW5zdGFuY2VvZiBEYXRlKSA/XG4gICAgICAgICAgICBzb3VyY2Vba2V5XSBpbnN0YW5jZW9mIEZvcm1Db250cm9sIHx8IHNvdXJjZVtrZXldIGluc3RhbmNlb2YgRm9ybUdyb3VwIHx8IHNvdXJjZVtrZXldIGluc3RhbmNlb2YgRm9ybUFycmF5ID9cbiAgICAgICAgICAgICAgc291cmNlW2tleV0gOlxuICAgICAgICAgICAgICBtYWtlRm9ybShzb3VyY2Vba2V5XSwga2V5c1ZhbGlkYXRvciwgYXN5bmNLZXlzVmFsaWRhdG9yLCB0cnVlKSA6XG4gICAgICAgICAgICBuZXcgRm9ybUNvbnRyb2woXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDoga2V5c1ZhbGlkYXRvcj8uaGFzKGtleSkgJiYgJ2Rpc2FibGVkJyBpbiBrZXlzVmFsaWRhdG9yLmdldChrZXkpISA/ICg8RXh0ZW5kZWRDb250cm9sT3B0aW9ucz5rZXlzVmFsaWRhdG9yLmdldChrZXkpKS5kaXNhYmxlZCA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiAhIXNvdXJjZVtrZXldICYmIHR5cGVvZiBzb3VyY2Vba2V5XSA9PSAnc3RyaW5nJyAmJiAoc291cmNlW2tleV0uaW5jbHVkZXMoJzAwMDEtMDEtMDEnKSB8fCBzb3VyY2Vba2V5XS5pbmNsdWRlcygnMTk3MC0wMS0wMScpKSA/IG51bGwgOiBzb3VyY2Vba2V5XVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBrZXlzVmFsaWRhdG9yPy5oYXMoa2V5KSA/IGtleXNWYWxpZGF0b3IuZ2V0KGtleSkgOiBudWxsLFxuICAgICAgICAgICAgICBhc3luY0tleXNWYWxpZGF0b3I/LmhhcyhrZXkpID8gYXN5bmNLZXlzVmFsaWRhdG9yLmdldChrZXkpIDogbnVsbCxcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfSwgbmV3IEZvcm1Hcm91cCh7fSxcbiAgICAgIGtleXNWYWxpZGF0b3I/LmhhcygnbWFpbkZvcm1WYWxpZGF0b3JzJykgJiYgIWludGVybmFsID9cbiAgICAgICAga2V5c1ZhbGlkYXRvci5nZXQoJ21haW5Gb3JtVmFsaWRhdG9ycycpIDpcbiAgICAgICAgbnVsbCxcbiAgICAgIGFzeW5jS2V5c1ZhbGlkYXRvcj8uaGFzKCdtYWluRm9ybVZhbGlkYXRvcnMnKSAmJiAhaW50ZXJuYWwgP1xuICAgICAgICBhc3luY0tleXNWYWxpZGF0b3IuZ2V0KCdtYWluRm9ybVZhbGlkYXRvcnMnKSA6XG4gICAgICAgIG51bGwpXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlRm9ybTxUIGV4dGVuZHMgRm9ybUdyb3VwIHwgRm9ybUFycmF5IHwgRm9ybUNvbnRyb2wgPSBGb3JtR3JvdXA+KFxuICBzb3VyY2U6IGFueSxcbiAga2V5c1ZhbGlkYXRvcj86IE1hcDxzdHJpbmcsIFZhbGlkYXRvckZuW10gfCBFeHRlbmRlZENvbnRyb2xPcHRpb25zIHwgbnVsbD4sXG4gIGFzeW5jS2V5c1ZhbGlkYXRvcj86IE1hcDxzdHJpbmcsIEFzeW5jVmFsaWRhdG9yRm5bXSB8IG51bGw+LFxuICBpbnRlcm5hbDogYm9vbGVhbiA9IGZhbHNlXG4pOiBUIHtcblxuICBjb25zdCBmb3JtID0gISFzb3VyY2UgJiYgKHR5cGVvZiBzb3VyY2UgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBzb3VyY2UgPT09ICdmdW5jdGlvbicpID9cbiAgICBzb3VyY2UgaW5zdGFuY2VvZiBBcnJheSA/XG4gICAgICBuZXcgRm9ybUFycmF5KHNvdXJjZS5tYXAoaXRlbSA9PiBtYWtlRm9ybShpdGVtLCBrZXlzVmFsaWRhdG9yLCBhc3luY0tleXNWYWxpZGF0b3IsIHRydWUpKSxcbiAgICAgICAga2V5c1ZhbGlkYXRvcj8uaGFzKCdtYWluRm9ybVZhbGlkYXRvcnMnKSAmJiAhaW50ZXJuYWwgP1xuICAgICAgICAgIGtleXNWYWxpZGF0b3IuZ2V0KCdtYWluRm9ybVZhbGlkYXRvcnMnKSA6XG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgYXN5bmNLZXlzVmFsaWRhdG9yPy5oYXMoJ21haW5Gb3JtVmFsaWRhdG9ycycpICYmICFpbnRlcm5hbCA/XG4gICAgICAgICAgYXN5bmNLZXlzVmFsaWRhdG9yLmdldCgnbWFpbkZvcm1WYWxpZGF0b3JzJykgOlxuICAgICAgICAgIG51bGxcbiAgICAgICkgOlxuICAgICAgbWFrZUZvcm1Hcm91cChzb3VyY2UsIGtleXNWYWxpZGF0b3IsIGFzeW5jS2V5c1ZhbGlkYXRvciwgaW50ZXJuYWwpIDpcbiAgICBuZXcgRm9ybUNvbnRyb2woe1xuICAgICAgZGlzYWJsZWQ6IGtleXNWYWxpZGF0b3I/LmhhcygnbWFpbkZvcm1WYWxpZGF0b3JzJykgJiYgJ2Rpc2FibGVkJyBpbiAoa2V5c1ZhbGlkYXRvci5nZXQoJ21haW5Gb3JtVmFsaWRhdG9ycycpISkgP1xuICAgICAgICAoPEV4dGVuZGVkQ29udHJvbE9wdGlvbnM+a2V5c1ZhbGlkYXRvci5nZXQoJ21haW5Gb3JtVmFsaWRhdG9ycycpKS5kaXNhYmxlZCA6XG4gICAgICAgIGZhbHNlLFxuICAgICAgdmFsdWU6IHNvdXJjZVxuICAgIH0sXG4gICAgICBrZXlzVmFsaWRhdG9yPy5oYXMoJ21haW5Gb3JtVmFsaWRhdG9ycycpICYmICFpbnRlcm5hbCA/XG4gICAgICAgIGtleXNWYWxpZGF0b3IuZ2V0KCdtYWluRm9ybVZhbGlkYXRvcnMnKSA6XG4gICAgICAgIG51bGwsXG4gICAgICBhc3luY0tleXNWYWxpZGF0b3I/LmhhcygnbWFpbkZvcm1WYWxpZGF0b3JzJykgJiYgIWludGVybmFsID9cbiAgICAgICAgYXN5bmNLZXlzVmFsaWRhdG9yLmdldCgnbWFpbkZvcm1WYWxpZGF0b3JzJykgOlxuICAgICAgICBudWxsKTtcbiAgcmV0dXJuIDxUPmZvcm07XG59OyJdfQ==