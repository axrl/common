{"version":3,"file":"axrl-ngx-extended-form-builder.umd.js","sources":["../../projects/ngx-extended-form-builder/src/lib/ngx-extended-form-builder.ts","../../projects/ngx-extended-form-builder/src/public-api.ts","../../projects/ngx-extended-form-builder/src/axrl-ngx-extended-form-builder.ts"],"sourcesContent":["import { FormGroup, FormArray, FormControl, ValidatorFn, AsyncValidatorFn, AbstractControlOptions } from \"@angular/forms\";\nimport { Observable } from \"rxjs\";\n\ninterface ExtendedControlOptions extends AbstractControlOptions {\n  disabled?: boolean,\n};\n\nfunction makeFormGroup(\n  source: any,\n  keysValidator?: Map<string, ValidatorFn[] | ExtendedControlOptions | null>,\n  asyncKeysValidator?: Map<string, AsyncValidatorFn[] | null>,\n  internal: boolean = false\n): FormGroup {\n  const keys = source instanceof FormControl || source instanceof FormGroup || source instanceof FormArray ?\n    Object.keys(source.value) :\n    Object.keys(source);\n  return keys.reduce(\n    (accumulator: FormGroup, key: string | any) => {\n      if (!(source[key] instanceof Observable)) {\n        accumulator.addControl(\n          key,\n          !!source[key] && typeof source[key] == 'object' && !(source[key] instanceof Date) ?\n            source[key] instanceof FormControl || source[key] instanceof FormGroup || source[key] instanceof FormArray ?\n              source[key] :\n              makeForm(source[key], keysValidator, asyncKeysValidator, true) :\n            new FormControl(\n              {\n                disabled: keysValidator?.has(key) && 'disabled' in keysValidator.get(key)! ? (<ExtendedControlOptions>keysValidator.get(key)).disabled : false,\n                value: !!source[key] && typeof source[key] == 'string' && (source[key].includes('0001-01-01') || source[key].includes('1970-01-01')) ? null : source[key]\n              },\n              keysValidator?.has(key) ? keysValidator.get(key) : null,\n              asyncKeysValidator?.has(key) ? asyncKeysValidator.get(key) : null,\n            )\n        );\n      };\n      return accumulator;\n    }, new FormGroup({},\n      keysValidator?.has('mainFormValidators') && !internal ?\n        keysValidator.get('mainFormValidators') :\n        null,\n      asyncKeysValidator?.has('mainFormValidators') && !internal ?\n        asyncKeysValidator.get('mainFormValidators') :\n        null)\n  );\n}\n\nexport function makeForm<T extends FormGroup | FormArray | FormControl = FormGroup>(\n  source: any,\n  keysValidator?: Map<string, ValidatorFn[] | ExtendedControlOptions | null>,\n  asyncKeysValidator?: Map<string, AsyncValidatorFn[] | null>,\n  internal: boolean = false\n): T {\n\n  const form = !!source && (typeof source === 'object' || typeof source === 'function') ?\n    source instanceof Array ?\n      new FormArray(source.map(item => makeForm(item, keysValidator, asyncKeysValidator, true)),\n        keysValidator?.has('mainFormValidators') && !internal ?\n          keysValidator.get('mainFormValidators') :\n          null,\n        asyncKeysValidator?.has('mainFormValidators') && !internal ?\n          asyncKeysValidator.get('mainFormValidators') :\n          null\n      ) :\n      makeFormGroup(source, keysValidator, asyncKeysValidator, internal) :\n    new FormControl({\n      disabled: keysValidator?.has('mainFormValidators') && 'disabled' in (keysValidator.get('mainFormValidators')!) ?\n        (<ExtendedControlOptions>keysValidator.get('mainFormValidators')).disabled :\n        false,\n      value: source\n    },\n      keysValidator?.has('mainFormValidators') && !internal ?\n        keysValidator.get('mainFormValidators') :\n        null,\n      asyncKeysValidator?.has('mainFormValidators') && !internal ?\n        asyncKeysValidator.get('mainFormValidators') :\n        null);\n  return <T>form\n};","/*\n * Public API Surface of ngx-extended-form-builder\n */\n\nexport * from './lib/ngx-extended-form-builder';","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["FormControl","FormGroup","FormArray","Observable"],"mappings":"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"}