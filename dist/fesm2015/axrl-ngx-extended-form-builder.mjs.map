{"version":3,"file":"axrl-ngx-extended-form-builder.mjs","sources":["../../projects/ngx-extended-form-builder/src/lib/ngx-extended-form-builder.ts","../../projects/ngx-extended-form-builder/src/public-api.ts","../../projects/ngx-extended-form-builder/src/axrl-ngx-extended-form-builder.ts"],"sourcesContent":["import { FormGroup, FormArray, FormControl } from \"@angular/forms\";\nimport type { ValidatorFn, AsyncValidatorFn, AbstractControlOptions } from \"@angular/forms\";\nimport { Observable } from \"rxjs\";\n\ninterface ExtendedControlOptions extends AbstractControlOptions {\n  disabled?: boolean,\n};\n\nfunction makeFormGroup(\n  source: any,\n  keysValidator?: Map<string, ValidatorFn[] | ExtendedControlOptions | null>,\n  asyncKeysValidator?: Map<string, AsyncValidatorFn[] | null>,\n  internal: boolean = false\n): FormGroup {\n  const keys = source instanceof FormControl || source instanceof FormGroup || source instanceof FormArray ?\n    Object.keys(source.value) :\n    Object.keys(source);\n  return keys.reduce(\n    (accumulator: FormGroup, key: string | any) => {\n      if (!(source[key] instanceof Observable)) {\n        accumulator.addControl(\n          key,\n          !!source[key] && typeof source[key] == 'object' && !(source[key] instanceof Date) ?\n            source[key] instanceof FormControl || source[key] instanceof FormGroup || source[key] instanceof FormArray ?\n              source[key] :\n              makeForm(source[key], keysValidator, asyncKeysValidator, true) :\n            new FormControl(\n              {\n                disabled: keysValidator?.has(key) && 'disabled' in keysValidator.get(key)! ? (<ExtendedControlOptions>keysValidator.get(key)).disabled : false,\n                value: !!source[key] && typeof source[key] == 'string' && (source[key].includes('0001-01-01') || source[key].includes('1970-01-01')) ? null : source[key]\n              },\n              keysValidator?.has(key) ? keysValidator.get(key) : null,\n              asyncKeysValidator?.has(key) ? asyncKeysValidator.get(key) : null,\n            )\n        );\n      };\n      return accumulator;\n    }, new FormGroup({},\n      keysValidator?.has('mainFormValidators') && !internal ?\n        keysValidator.get('mainFormValidators') :\n        null,\n      asyncKeysValidator?.has('mainFormValidators') && !internal ?\n        asyncKeysValidator.get('mainFormValidators') :\n        null)\n  );\n}\n\nexport function makeForm<T extends FormGroup | FormArray | FormControl = FormGroup>(\n  source: any,\n  keysValidator?: Map<string, ValidatorFn[] | ExtendedControlOptions | null>,\n  asyncKeysValidator?: Map<string, AsyncValidatorFn[] | null>,\n  internal: boolean = false\n): T {\n\n  const form = !!source && (typeof source === 'object' || typeof source === 'function') ?\n    source instanceof Array ?\n      new FormArray(source.map(item => makeForm(item, keysValidator, asyncKeysValidator, true)),\n        keysValidator?.has('mainFormValidators') && !internal ?\n          keysValidator.get('mainFormValidators') :\n          null,\n        asyncKeysValidator?.has('mainFormValidators') && !internal ?\n          asyncKeysValidator.get('mainFormValidators') :\n          null\n      ) :\n      makeFormGroup(source, keysValidator, asyncKeysValidator, internal) :\n    new FormControl({\n      disabled: keysValidator?.has('mainFormValidators') && 'disabled' in (keysValidator.get('mainFormValidators')!) ?\n        (<ExtendedControlOptions>keysValidator.get('mainFormValidators')).disabled :\n        false,\n      value: source\n    },\n      keysValidator?.has('mainFormValidators') && !internal ?\n        keysValidator.get('mainFormValidators') :\n        null,\n      asyncKeysValidator?.has('mainFormValidators') && !internal ?\n        asyncKeysValidator.get('mainFormValidators') :\n        null);\n  return <T>form;\n};","/*\n * Public API Surface of ngx-extended-form-builder\n */\n\nexport * from './lib/ngx-extended-form-builder';","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}